\documentclass[10pt]{extarticle}

% Page layout
\usepackage{geometry}
\geometry{
  a4paper,
  margin={1in,1in},
}
\usepackage{setspace}
% \linespread{1.25}

% Typography
% https://ctan.math.washington.edu/tex-archive/fonts/etbb/doc/ETbb-doc.pdf
\usepackage[p]{ETbb}
\usepackage[scaled=.95,type1]{cabin}
\usepackage[varqu,varl]{zi4}
\usepackage[T1]{fontenc}
\usepackage[libertine,vvarbb]{newtxmath}
\usepackage{microtype}
\frenchspacing

% Bibliography
\usepackage[
  % style=authoryear,
  style=authoryear-ibid,
  maxcitenames=2,
  doi=false,
  isbn=false,
  % Omit URL except for @online
  url=false,
]{biblatex}

\addbibresource{~/library.bib}

% Map @misc to @online
\DeclareSourcemap{
  \maps[datatype=bibtex, overwrite=true]{
    \map{
      \step[typesource=misc, typetarget=online]
    }
  }
}

\AtEveryBibitem{%
  \clearlist{language}%
  \clearfield{month}%
  \clearfield{note}%
  \clearfield{eprint}%
  % Omit "Visited on <date>"
  \iffieldundef{urlyear}
    {}
    {\clearfield{urlyear}}
}

% Use given name in next cite command
\newrobustcmd*{\nextcitefullname}{%
  \AtNextCite{%
    \DeclareNameAlias{labelname}{given-family}%
    \togglefalse{abx@bool@giveninits}}}

% Cite author's full name
\newcommand\citeauthorfull{%
  \nextcitefullname
  \citeauthor}

% Quotations
\usepackage{csquotes}

% Code snippets
\usepackage{listings}

% Hyperlinks
\usepackage{hyperref}

% Input/include relative paths
\usepackage{import}

% Lists
\usepackage{enumitem}

% Fix references
\usepackage{bookmark}

% Tables and charts
\usepackage{caption}
\usepackage{subcaption}
\usepackage{tabularx}
\usepackage[draft]{graphicx}

\def\imagebox#1#2{\vtop to #1{\null\hbox{#2}\vfill}}

\usepackage{tikz}
\usetikzlibrary{external}
\tikzexternalize[prefix=figures/]

\usepackage{pgfplots}
\usepackage{pgfplotstable}
\pgfplotsset{compat=1.17}
\usepgfplotslibrary{colorbrewer}
\usepgfplotslibrary{groupplots}

\pgfplotsset{
  discard if/.style 2 args={
      x filter/.append code={
          \readlist\mylist{#2}%
          \foreachitem\z\in\mylist[]{%
            \ifdim\thisrow{#1} pt=\z pt
              \def\pgfmathresult{inf}
            \fi
          }
        }
    },
}

\pgfplotsset{
  discard if not/.style 2 args={
      x filter/.code={
          \edef\tempa{\thisrow{#1}}
          \edef\tempb{#2}
          \ifx\tempa\tempb
          \else
            \def\pgfmathresult{inf}
          \fi
        }
    }
}

\begin{document}

\title{Graded Similarity in Context}
\author{Tim Lawson}
\date{\today}

\maketitle

\import*{.}{content.tex}

\printbibliography

\end{document}
